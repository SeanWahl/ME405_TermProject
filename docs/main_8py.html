<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: src/main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Term Project
   </div>
   <div id="projectbrief">Nerf Sentry Turret</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('main_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Controls the nerf turret.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63255f1a1d25c5b5783f3aed4a7b2a64"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a63255f1a1d25c5b5783f3aed4a7b2a64">main.onButtonPress</a> (IRQ_src)</td></tr>
<tr class="memdesc:a63255f1a1d25c5b5783f3aed4a7b2a64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects interrupt request through blue button press.  <br /></td></tr>
<tr class="separator:a63255f1a1d25c5b5783f3aed4a7b2a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a009b75e2a38ba2314d726523b9446e35"><td class="memItemLeft" align="right" valign="top"><a id="a009b75e2a38ba2314d726523b9446e35" name="a009b75e2a38ba2314d726523b9446e35"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.serport</b> = pyb.USB_VCP()</td></tr>
<tr class="memdesc:a009b75e2a38ba2314d726523b9446e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serial port object for detecting the user's keyboard inputs, such as "s". <br /></td></tr>
<tr class="separator:a009b75e2a38ba2314d726523b9446e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a845a1d7faaf4b869ad9bbea09c37a3"><td class="memItemLeft" align="right" valign="top"><a id="a7a845a1d7faaf4b869ad9bbea09c37a3" name="a7a845a1d7faaf4b869ad9bbea09c37a3"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.ButtonInt</b> = pyb.ExtInt(pyb.Pin(pyb.Pin.board.PC13), mode=pyb.ExtInt.IRQ_FALLING, pull=pyb.Pin.PULL_NONE, callback=onButtonPress)</td></tr>
<tr class="memdesc:a7a845a1d7faaf4b869ad9bbea09c37a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Button interrupt set up for the Nucleo's blue button, attached to pin C13. <br /></td></tr>
<tr class="separator:a7a845a1d7faaf4b869ad9bbea09c37a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b22a4feeb63a586936ec5ec551102ba"><td class="memItemLeft" align="right" valign="top"><a id="a9b22a4feeb63a586936ec5ec551102ba" name="a9b22a4feeb63a586936ec5ec551102ba"></a>
MotorDriver&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_motor_yaw</b> = MotorDriver(pyb.Pin.board.PA10, pyb.Pin.board.PB4, pyb.Pin.board.PB5, 3)</td></tr>
<tr class="memdesc:a9b22a4feeb63a586936ec5ec551102ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base's motor to move about the yaw axis, turning left and right. <br /></td></tr>
<tr class="separator:a9b22a4feeb63a586936ec5ec551102ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44acfc6fb68cda39a413915d49698144"><td class="memItemLeft" align="right" valign="top"><a id="a44acfc6fb68cda39a413915d49698144" name="a44acfc6fb68cda39a413915d49698144"></a>
encoder&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_encoder_yaw</b> = encoder(pyb.Pin.board.PB6, pyb.Pin.board.PB7, 4)</td></tr>
<tr class="memdesc:a44acfc6fb68cda39a413915d49698144"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base motor's encoder. <br /></td></tr>
<tr class="separator:a44acfc6fb68cda39a413915d49698144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a446672ec31fe4abc6eb5efb65a3deacc"><td class="memItemLeft" align="right" valign="top"><a id="a446672ec31fe4abc6eb5efb65a3deacc" name="a446672ec31fe4abc6eb5efb65a3deacc"></a>
CLController&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_controller_yaw</b> = CLController(60, .1, math.pi*16*2.5, 0)</td></tr>
<tr class="memdesc:a446672ec31fe4abc6eb5efb65a3deacc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base motor's closed loop controller. <br /></td></tr>
<tr class="separator:a446672ec31fe4abc6eb5efb65a3deacc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc2fb00f2903c2666b69eba35dcb5ce"><td class="memItemLeft" align="right" valign="top"><a id="a7bc2fb00f2903c2666b69eba35dcb5ce" name="a7bc2fb00f2903c2666b69eba35dcb5ce"></a>
MotorDriver&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_motor_pitch</b> = MotorDriver(pyb.Pin.board.PC1, pyb.Pin.board.PA0, pyb.Pin.board.PA1, 5)</td></tr>
<tr class="memdesc:a7bc2fb00f2903c2666b69eba35dcb5ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pitch axis's motor to point the gun up and down. <br /></td></tr>
<tr class="separator:a7bc2fb00f2903c2666b69eba35dcb5ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97c0b2c23b0f9c3adb80b0f910bbfaae"><td class="memItemLeft" align="right" valign="top"><a id="a97c0b2c23b0f9c3adb80b0f910bbfaae" name="a97c0b2c23b0f9c3adb80b0f910bbfaae"></a>
encoder&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_encoder_pitch</b> = encoder(pyb.Pin.board.PC6, pyb.Pin.board.PC7, 8)</td></tr>
<tr class="memdesc:a97c0b2c23b0f9c3adb80b0f910bbfaae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pitch motor's encoder. <br /></td></tr>
<tr class="separator:a97c0b2c23b0f9c3adb80b0f910bbfaae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa171c7162ccf43ea928837e1ef40c3cb"><td class="memItemLeft" align="right" valign="top"><a id="aa171c7162ccf43ea928837e1ef40c3cb" name="aa171c7162ccf43ea928837e1ef40c3cb"></a>
CLController&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_controller_pitch</b> = CLController(30, .1, 8, 0)</td></tr>
<tr class="memdesc:aa171c7162ccf43ea928837e1ef40c3cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pitch motor's closed loop controller. <br /></td></tr>
<tr class="separator:aa171c7162ccf43ea928837e1ef40c3cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a278cc732e509f63da362fe917e7fce97"><td class="memItemLeft" align="right" valign="top"><a id="a278cc732e509f63da362fe917e7fce97" name="a278cc732e509f63da362fe917e7fce97"></a>
Nerf&#160;</td><td class="memItemRight" valign="bottom"><b>main.my_gun</b> = Nerf(Pin.board.PB3, Pin.board.PC4)</td></tr>
<tr class="memdesc:a278cc732e509f63da362fe917e7fce97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nerf gun object for arming and shooting. <br /></td></tr>
<tr class="separator:a278cc732e509f63da362fe917e7fce97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d73d327dec2111d402927a6b36363fd"><td class="memItemLeft" align="right" valign="top"><a id="a6d73d327dec2111d402927a6b36363fd" name="a6d73d327dec2111d402927a6b36363fd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.cont_per</b> = 10</td></tr>
<tr class="memdesc:a6d73d327dec2111d402927a6b36363fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Period for the controller task in ms. <br /></td></tr>
<tr class="separator:a6d73d327dec2111d402927a6b36363fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8fd7367ce395b341b52d5360f48eef8"><td class="memItemLeft" align="right" valign="top"><a id="aa8fd7367ce395b341b52d5360f48eef8" name="aa8fd7367ce395b341b52d5360f48eef8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.cam_per</b> = 5500</td></tr>
<tr class="memdesc:aa8fd7367ce395b341b52d5360f48eef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial period for the camera task in ms. <br /></td></tr>
<tr class="separator:aa8fd7367ce395b341b52d5360f48eef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ab06d230e18cec116c1110a6c5d2f0"><td class="memItemLeft" align="right" valign="top"><a id="ae8ab06d230e18cec116c1110a6c5d2f0" name="ae8ab06d230e18cec116c1110a6c5d2f0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.shoot_per</b> = 4500</td></tr>
<tr class="memdesc:ae8ab06d230e18cec116c1110a6c5d2f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inital period for the nerf gun task in ms. <br /></td></tr>
<tr class="separator:ae8ab06d230e18cec116c1110a6c5d2f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129bda823cbb62ffb698427de27e0d56"><td class="memItemLeft" align="right" valign="top"><a id="a129bda823cbb62ffb698427de27e0d56" name="a129bda823cbb62ffb698427de27e0d56"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.try</b> :</td></tr>
<tr class="separator:a129bda823cbb62ffb698427de27e0d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09930e0e202cfb6ac32a0692ae2cec58"><td class="memItemLeft" align="right" valign="top"><a id="a09930e0e202cfb6ac32a0692ae2cec58" name="a09930e0e202cfb6ac32a0692ae2cec58"></a>
I2C&#160;</td><td class="memItemRight" valign="bottom"><b>main.i2c_bus</b> = I2C(1, scl=Pin(22), sda=Pin(21))</td></tr>
<tr class="separator:a09930e0e202cfb6ac32a0692ae2cec58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef90aa5d9f981abe8801c5f9c508e000"><td class="memItemLeft" align="right" valign="top"><a id="aef90aa5d9f981abe8801c5f9c508e000" name="aef90aa5d9f981abe8801c5f9c508e000"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.else</b> :</td></tr>
<tr class="separator:aef90aa5d9f981abe8801c5f9c508e000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab24b775ca486fc25931509f42ccce1"><td class="memItemLeft" align="right" valign="top"><a id="afab24b775ca486fc25931509f42ccce1" name="afab24b775ca486fc25931509f42ccce1"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.i2c_address</b> = 0x33</td></tr>
<tr class="memdesc:afab24b775ca486fc25931509f42ccce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">MLX90640's I2C address. <br /></td></tr>
<tr class="separator:afab24b775ca486fc25931509f42ccce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39ab736d2cef35d74e61c7ea9487734"><td class="memItemLeft" align="right" valign="top"><a id="af39ab736d2cef35d74e61c7ea9487734" name="af39ab736d2cef35d74e61c7ea9487734"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>main._scanhex</b> = [f&quot;0x{addr:X}&quot; for addr in i2c_bus.scan()]</td></tr>
<tr class="separator:af39ab736d2cef35d74e61c7ea9487734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d70559af0a6ba9fcc2b474c0c18d357"><td class="memItemLeft" align="right" valign="top"><a id="a4d70559af0a6ba9fcc2b474c0c18d357" name="a4d70559af0a6ba9fcc2b474c0c18d357"></a>
MLX_Cam&#160;</td><td class="memItemRight" valign="bottom"><b>main.camera</b> = MLX_Cam(i2c_bus)</td></tr>
<tr class="memdesc:a4d70559af0a6ba9fcc2b474c0c18d357"><td class="mdescLeft">&#160;</td><td class="mdescRight">The camera object for the MLX90640. <br /></td></tr>
<tr class="separator:a4d70559af0a6ba9fcc2b474c0c18d357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7fe081768527bb981ece907d93b2895"><td class="memItemLeft" align="right" valign="top"><a id="af7fe081768527bb981ece907d93b2895" name="af7fe081768527bb981ece907d93b2895"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.s0</b> = 0</td></tr>
<tr class="memdesc:af7fe081768527bb981ece907d93b2895"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state in which user input is waited on to start the control algorithm. <br /></td></tr>
<tr class="separator:af7fe081768527bb981ece907d93b2895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9846d3d7c4f9d951d67031ae5540b6bb"><td class="memItemLeft" align="right" valign="top"><a id="a9846d3d7c4f9d951d67031ae5540b6bb" name="a9846d3d7c4f9d951d67031ae5540b6bb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.s1</b> = 1</td></tr>
<tr class="memdesc:a9846d3d7c4f9d951d67031ae5540b6bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The state in which the camera, controller, and nerf gun psuedotasks are run after user input has been received. <br /></td></tr>
<tr class="separator:a9846d3d7c4f9d951d67031ae5540b6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930442dd832ba9fe94227723c47f6653"><td class="memItemLeft" align="right" valign="top"><a id="a930442dd832ba9fe94227723c47f6653" name="a930442dd832ba9fe94227723c47f6653"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.state</b> = s0</td></tr>
<tr class="memdesc:a930442dd832ba9fe94227723c47f6653"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current overall state of the program. <br /></td></tr>
<tr class="separator:a930442dd832ba9fe94227723c47f6653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cd44233c966e589c8a8767555b63105"><td class="memItemLeft" align="right" valign="top"><a id="a0cd44233c966e589c8a8767555b63105" name="a0cd44233c966e589c8a8767555b63105"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>main.buttonPressed</b> = False</td></tr>
<tr class="memdesc:a0cd44233c966e589c8a8767555b63105"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether or not the blue button has recently been pressed. <br /></td></tr>
<tr class="separator:a0cd44233c966e589c8a8767555b63105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb86b4dea13b8217fb514dc4f86580bc"><td class="memItemLeft" align="right" valign="top"><a id="adb86b4dea13b8217fb514dc4f86580bc" name="adb86b4dea13b8217fb514dc4f86580bc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.shot_count</b> = 0</td></tr>
<tr class="memdesc:adb86b4dea13b8217fb514dc4f86580bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many times the gun has been shot. <br /></td></tr>
<tr class="separator:adb86b4dea13b8217fb514dc4f86580bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d219d4d177fc1af8b8cef0a421aa64f"><td class="memItemLeft" align="right" valign="top"><a id="a8d219d4d177fc1af8b8cef0a421aa64f" name="a8d219d4d177fc1af8b8cef0a421aa64f"></a>
ticks_ms&#160;</td><td class="memItemRight" valign="bottom"><b>main.t_init</b> = ticks_ms()</td></tr>
<tr class="memdesc:a8d219d4d177fc1af8b8cef0a421aa64f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time at which the user has started the program, upon a button press or "s" input. <br /></td></tr>
<tr class="separator:a8d219d4d177fc1af8b8cef0a421aa64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19db0ac5c25bd402cbb09b08f4aa92c1"><td class="memItemLeft" align="right" valign="top"><a id="a19db0ac5c25bd402cbb09b08f4aa92c1" name="a19db0ac5c25bd402cbb09b08f4aa92c1"></a>
MLX_Cam&#160;</td><td class="memItemRight" valign="bottom"><b>main.image</b> = camera.get_image()</td></tr>
<tr class="memdesc:a19db0ac5c25bd402cbb09b08f4aa92c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The camera's image data. <br /></td></tr>
<tr class="separator:a19db0ac5c25bd402cbb09b08f4aa92c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8832e9730be6f4c543696622c132c6"><td class="memItemLeft" align="right" valign="top"><a id="aef8832e9730be6f4c543696622c132c6" name="aef8832e9730be6f4c543696622c132c6"></a>
MLX_Cam&#160;</td><td class="memItemRight" valign="bottom"><b>main.column</b> = camera.get_hot_column(image)</td></tr>
<tr class="memdesc:aef8832e9730be6f4c543696622c132c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The hottest column of the camera's image. <br /></td></tr>
<tr class="separator:aef8832e9730be6f4c543696622c132c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9649912e0b69d0c342c741569d0f4f1a"><td class="memItemLeft" align="right" valign="top"><a id="a9649912e0b69d0c342c741569d0f4f1a" name="a9649912e0b69d0c342c741569d0f4f1a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.motorAngle</b> = .5613 * column + 117.89</td></tr>
<tr class="memdesc:a9649912e0b69d0c342c741569d0f4f1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The angle at which the yaw motor should turn to in order to aim at the target. <br /></td></tr>
<tr class="separator:a9649912e0b69d0c342c741569d0f4f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00e97158ab365cdb928061a968acbce2"><td class="memItemLeft" align="right" valign="top"><a id="a00e97158ab365cdb928061a968acbce2" name="a00e97158ab365cdb928061a968acbce2"></a>
ticks_ms&#160;</td><td class="memItemRight" valign="bottom"><b>main.t_rn</b> = ticks_ms()</td></tr>
<tr class="memdesc:a00e97158ab365cdb928061a968acbce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time directly after taking the picture. <br /></td></tr>
<tr class="separator:a00e97158ab365cdb928061a968acbce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af93c5f6c86910767f925647b79779c7b"><td class="memItemLeft" align="right" valign="top"><a id="af93c5f6c86910767f925647b79779c7b" name="af93c5f6c86910767f925647b79779c7b"></a>
ticks_add&#160;</td><td class="memItemRight" valign="bottom"><b>main.t_next_cont</b> = ticks_add(t_rn, cont_per)</td></tr>
<tr class="memdesc:af93c5f6c86910767f925647b79779c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time at which the controller task should run again. <br /></td></tr>
<tr class="separator:af93c5f6c86910767f925647b79779c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a2d7c2da0a6ea5b6f4642fb1db5174"><td class="memItemLeft" align="right" valign="top"><a id="a16a2d7c2da0a6ea5b6f4642fb1db5174" name="a16a2d7c2da0a6ea5b6f4642fb1db5174"></a>
ticks_add&#160;</td><td class="memItemRight" valign="bottom"><b>main.t_next_cam</b> = ticks_add(t_init, cam_per)</td></tr>
<tr class="memdesc:a16a2d7c2da0a6ea5b6f4642fb1db5174"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time at which the camera task should run again. <br /></td></tr>
<tr class="separator:a16a2d7c2da0a6ea5b6f4642fb1db5174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76d9cd3f8ed35111f0cebb70bec8c2b9"><td class="memItemLeft" align="right" valign="top"><a id="a76d9cd3f8ed35111f0cebb70bec8c2b9" name="a76d9cd3f8ed35111f0cebb70bec8c2b9"></a>
ticks_add&#160;</td><td class="memItemRight" valign="bottom"><b>main.t_next_shoot</b> = ticks_add(t_rn, 10_000)</td></tr>
<tr class="memdesc:a76d9cd3f8ed35111f0cebb70bec8c2b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time at which the nerf gun task should run again. <br /></td></tr>
<tr class="separator:a76d9cd3f8ed35111f0cebb70bec8c2b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5516457071c04f9527d211d4490fcb"><td class="memItemLeft" align="right" valign="top"><a id="a0c5516457071c04f9527d211d4490fcb" name="a0c5516457071c04f9527d211d4490fcb"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.charIn</b> = serport.read(1).decode()</td></tr>
<tr class="memdesc:a0c5516457071c04f9527d211d4490fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Character data from user's keyboard inputs. <br /></td></tr>
<tr class="separator:a0c5516457071c04f9527d211d4490fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14224271ba38ecbd9d22d39b5318a957"><td class="memItemLeft" align="right" valign="top"><a id="a14224271ba38ecbd9d22d39b5318a957" name="a14224271ba38ecbd9d22d39b5318a957"></a>
CLController&#160;</td><td class="memItemRight" valign="bottom"><b>main.actuation_yaw</b> = my_controller_yaw.run(my_encoder_yaw.read_Posrad(), my_encoder_yaw.read_Velrad())</td></tr>
<tr class="memdesc:a14224271ba38ecbd9d22d39b5318a957"><td class="mdescLeft">&#160;</td><td class="mdescRight">The duty cycle applied to the yaw motor, calculated through a closed loop control law. <br /></td></tr>
<tr class="separator:a14224271ba38ecbd9d22d39b5318a957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ab4c56d0cd69f1b9b1a5d441b9a22e"><td class="memItemLeft" align="right" valign="top"><a id="a97ab4c56d0cd69f1b9b1a5d441b9a22e" name="a97ab4c56d0cd69f1b9b1a5d441b9a22e"></a>
CLController&#160;</td><td class="memItemRight" valign="bottom"><b>main.actuation_pitch</b> = my_controller_pitch.run(my_encoder_pitch.read_Posrad(), my_encoder_pitch.read_Velrad())</td></tr>
<tr class="memdesc:a97ab4c56d0cd69f1b9b1a5d441b9a22e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The duty cycle applied to the pitch motor, calculated through a closed loop control law. <br /></td></tr>
<tr class="separator:a97ab4c56d0cd69f1b9b1a5d441b9a22e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Controls the nerf turret. </p>
<p>Contains all necessary code to be able to use the nerf turret. Please see the main page for formal task and state diagrams. Essentially, this program sets up all necessary objects and then waits for a user indication to start. Upon a button press or the user entering "s", the program will start.</p>
<p>Once started, the program takes a picture of the opposite side of the table. With this data, it calculates where the opponent is, and converts this into a motor angle. The program then continuously controls the motor to go to this angle. Upon 5 seconds (when the opponent is no longer able to move) the turret takes another picture and adjusts to this position. After 0.5s of adjusting, the gun shoots and then takes another picture. This process of taking a picture, calculating an angle, adjusting, and shooting continues indefinitely. When a shot count maximum is reached, the gun will no longer shoot but will still adjust to point at the opponent.</p>
<p>At any point, the user can Ctrl-C or press the blue button again to exit the program. </p><dl class="section author"><dt>Author</dt><dd>Nathan Dodd </dd>
<dd>
Lewis Kanagy </dd>
<dd>
Sean Wahl </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 20, 2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a63255f1a1d25c5b5783f3aed4a7b2a64" name="a63255f1a1d25c5b5783f3aed4a7b2a64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63255f1a1d25c5b5783f3aed4a7b2a64">&#9670;&#160;</a></span>onButtonPress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.onButtonPress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IRQ_src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects interrupt request through blue button press. </p>
<p>When the button is pressed, this function will set a variable as true, indicating that the button has been pressed and allowing the program to enact on the button press elsewhere. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">IRQ_src</td><td>Interrupt service request notation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main_8py.html">main.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
